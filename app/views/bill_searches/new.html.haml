%div.container(ng-controller="BillSearchController")
  .form.form-inline
    .form-group
      .input-group
        %input.form-control(ng-model="start.date" datepicker-popup="{{format}}" is-open="start.opened" placeholder="Start Time")
        %span.input-group-addon
          %i.glyphicon.glyphicon-calendar(ng-click="start_open($event)")
    .form-group
      .input-group
        %input.form-control(ng-model="end.date" datepicker-popup="{{format}}" is-open="end.opened" placeholder="End Time")
        %span.input-group-addon
          %i.glyphicon.glyphicon-calendar(ng-click="end_open($event)")
    .form-group#billSearchButtonGroup
      %button.btn.btn-primary(ng-click="search_bills_by_time_range(start.date, end.date)") Search
      %a.btn.btn-primary{href: bills_path()} Return
    .form-group#billSearchKeyWord
      %input.form-control(ng-model="keyword" placeholder="Filter Results")
    %span#balanceContainer
      %div{ class: "alert-{{alert_banner}} balanceAlert" }
        Balance: {{balance}}


  %table.table.table-striped.table-hover
    %thead
      %th Bill Id
      %th Amount
      %th Category
      %th Create Time
      %th Date
      %th Type
      %th Note
    %tbody
      %tr(ng-repeat='bill in bills | filter: keyword')
        %td {{bill.bill_id}}
        %td {{bill.amount}}
        %td {{bill.category}}
        %td {{bill.create_timestamp}}
        %td {{bill.date}}
        %td {{bill.is_expense ? "Expense" : "Earn"}}
        %td {{bill.note}}
  / - max_page_links = 5
  / - search_params = params[:bill_search] || {}
  / - if @bill_search.num_of_pages > 1
  /   %ul.pagination
  /     - if @bill_search.page > 0
  /       %li= link_to "<<", new_bill_search_path({ bill_search: search_params.merge({page: @bill_search.page - 1})})
  /     - (0..@bill_search.num_of_pages - 1).each do |i|
  /       - if (@bill_search.page - i).abs < max_page_links || i == 0 || i == @bill_search.num_of_pages - 1
  /         %li{class: (@bill_search.page == i ? "active" : "")}
  /           = link_to "#{i}", new_bill_search_path({ bill_search: search_params.merge({page: i})})
  /       - elsif (@bill_search.page - i).abs == max_page_links
  /         %li.disabled
  /           %span ...
  /     - if @bill_search.page < @bill_search.num_of_pages - 1
  /       %li= link_to ">>", new_bill_search_path({ bill_search: search_params.merge({page: @bill_search.page + 1})})
